### 1. 메시지 큐 상에서 알림의 순서 보장이 필요한 경우는 언제이며, 순서를 어떻게 보장하는가?

<details>
<summary> 예시 답안 </summary><br>

**[ 필요한 경우 ]**

- 단계별 워크플로우 알림) 주문 접수 → 결제 완료 → 배송 시작 → 배송 완료와 같이 서로 의존적인 이벤트를 순차적으로 전달해야 하는 경우
- 인증·보안 흐름) OTP(일회용 비밀번호) 발송 → 사용자 입력 → 검증 결과 안내 과정에서 OTP 메시지가 검증 결과 메일보다 늦게 도착하면 사용자 경험이 깨짐
- 실시간 채팅·협업 알림) 메시지 순서가 뒤바뀌면 대화 문맥이 혼란스러워지고, 메시지 삭제나 수정 알림이 원본보다 먼저 도착하면 부자연스러워짐

**[ 순서를 보장하는 방법 ]**

1. 파티셔닝 전략
Kafka 같은 분산 스트리밍 플랫폼을 사용해, userId 또는 eventType 단위로 단일 파티션을 할당하면, 한 파티션 내에서는 순서 보장이 됨 (컨슈머의 폴링)

2. 타임스탬프 & 시퀀스 번호
페이로드에 타임스탬프(createdAt)와 시퀀스 번호(sequenceId)를 담아, 클라이언트에서 최종 정렬하거나 로그로 검증할 수 있게 합니다.


</details>

### 2. 중복 전송을 막을 수 없는 이유와 중복 전송을 낮추는 방법은?

<details>
<summary> 예시 답안 </summary><br>

**[ 중복 전송을 막을 수 없는 이유 ]**

- 네트워크 오류나 타임아웃이 발생하면, 전송 성공 여부를 확실히 알 수 없기 때문에 클라이언트는 메시지를 재전송해야함
- 이때 실제로는 첫 전송이 성공했는데 응답이 유실되면, 재전송된 메시지가 중복으로 수신될 수밖에 없음

**[ 중복 전송을 낮추는 방법 ]**

Idempotency Key 사용)
메시지마다 고유 eventId를 부여하고, 수신 측(또는 송신 로그)에 기록된 ID를 체크해서 중복 처리 차단

</details>
